:original_name: en-us_topic_0020237260.html

.. _en-us_topic_0020237260:

Querying Details About a VBS Backup (Native OpenStack API) (Deprecated)
=======================================================================

Function
--------

This API is used to query details about a VBS backup. This API has been deprecated.

URI
---

-  URI format

   GET /v2/{project_id}/backups/{backup_id}

-  Parameter description

   ========== ========= ===========
   Parameter  Mandatory Description
   ========== ========= ===========
   project_id Yes       Project ID
   backup_id  Yes       Backup ID
   ========== ========= ===========

Request
-------

None

Response
--------

-  Parameter description

   +------------------------------+------------+-----------------------------------------------+
   | Parameter                    | Type       | Description                                   |
   +==============================+============+===============================================+
   | backup                       | dict       | List of queried backups                       |
   +------------------------------+------------+-----------------------------------------------+
   | status                       | string     | Backup status                                 |
   +------------------------------+------------+-----------------------------------------------+
   | description                  | string     | Backup description                            |
   +------------------------------+------------+-----------------------------------------------+
   | links                        | list<dict> | Backup URL                                    |
   +------------------------------+------------+-----------------------------------------------+
   | availability_zone            | string     | AZ where the backup resides                   |
   +------------------------------+------------+-----------------------------------------------+
   | volume_id                    | string     | Source disk ID of the backup                  |
   +------------------------------+------------+-----------------------------------------------+
   | fail_reason                  | string     | Cause of the backup failure                   |
   +------------------------------+------------+-----------------------------------------------+
   | id                           | string     | Backup ID                                     |
   +------------------------------+------------+-----------------------------------------------+
   | size                         | int        | Backup size                                   |
   +------------------------------+------------+-----------------------------------------------+
   | object_count                 | int        | Number of objects on OBS for the disk data    |
   +------------------------------+------------+-----------------------------------------------+
   | container                    | string     | Container of the backup                       |
   +------------------------------+------------+-----------------------------------------------+
   | name                         | string     | Backup name                                   |
   +------------------------------+------------+-----------------------------------------------+
   | created_at                   | string     | Backup creation time                          |
   +------------------------------+------------+-----------------------------------------------+
   | os-bak-tenant-attr:tenant_id | string     | ID of the project that owns the VBS backup    |
   +------------------------------+------------+-----------------------------------------------+
   | service_metadata             | string     | Backup metadata                               |
   +------------------------------+------------+-----------------------------------------------+
   | updated_at                   | string     | Time when the backup was updated              |
   +------------------------------+------------+-----------------------------------------------+
   | data_timestamp               | string     | Current time                                  |
   +------------------------------+------------+-----------------------------------------------+
   | has_dependent_backups        | boolean    | Whether a dependent backup exists             |
   +------------------------------+------------+-----------------------------------------------+
   | snapshot_id                  | string     | ID of the snapshot associated with the backup |
   +------------------------------+------------+-----------------------------------------------+
   | is_incremental               | boolean    | Whether the backup is an incremental backup   |
   +------------------------------+------------+-----------------------------------------------+

-  **service_metadata** parameter description

   +-----------+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter | Type    | Description                                                                                                                                                                                                                                                      |
   +===========+=========+==================================================================================================================================================================================================================================================================+
   | DL        | int     | **0**: non-deduplication and non-compression; **1**: deduplication and non-compression; **2**: non-deduplication and compression; **3**: deduplication and compression If this key is not specified, the value is **0** (non-deduplication and non-compression). |
   +-----------+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | VK        | string  | Encryption VK of an encrypted volume. The value is 64 characters long.                                                                                                                                                                                           |
   +-----------+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | bootable  | boolean | Whether the disk is the boot disk                                                                                                                                                                                                                                |
   +-----------+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | backupurl | string  | Backup image ID on the backup system                                                                                                                                                                                                                             |
   +-----------+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | SP        | string  | Path name of the backup image in the storage unit                                                                                                                                                                                                                |
   +-----------+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | VMID      | string  | ID of the VM to which the backup image belongs                                                                                                                                                                                                                   |
   +-----------+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | ST        | int     | Backup service type. **0**: disk backup; **1**: VM backup; **4**: disk backup copy, **5**: VM backup copy. If this tag does not exist, disk backup is specified.                                                                                                 |
   +-----------+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | BT        | int     | Backup storage type                                                                                                                                                                                                                                              |
   +-----------+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | SS        | int     | Space saving rate                                                                                                                                                                                                                                                |
   +-----------+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | BP        | string  | Storage unit path                                                                                                                                                                                                                                                |
   +-----------+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | CMKID     | string  | CMK ID of an encrypted volume. The content is UUID and contains 36 characters.                                                                                                                                                                                   |
   +-----------+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | progress  | int     | Backup progress                                                                                                                                                                                                                                                  |
   +-----------+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | CS        | int     | Total backup data of the chain where the backup is located. The unit is MB.                                                                                                                                                                                      |
   +-----------+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | VT        | string  | Production storage disk type                                                                                                                                                                                                                                     |
   +-----------+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | OMID      | string  | Host ID of the job execution node                                                                                                                                                                                                                                |
   +-----------+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Type      | int     | Backup type. **0**: full backup; **1**: incremental backup                                                                                                                                                                                                       |
   +-----------+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | ebk_T_I   | string  | Job ID of the backup system                                                                                                                                                                                                                                      |
   +-----------+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | AT        | float   | Average rate (Average Throughput). The unit is MB/s. One digit is reserved after the decimal point.                                                                                                                                                              |
   +-----------+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

-  **description** parameter description

   +-----------+--------+----------------------------------------------------------------------------------------------------------+
   | Parameter | Type   | Description                                                                                              |
   +===========+========+==========================================================================================================+
   | DESC      | string | Backup description                                                                                       |
   +-----------+--------+----------------------------------------------------------------------------------------------------------+
   | INC       | int    | Whether the backup request was an incremental backup call. **1**: incremental backup; **0**: full backup |
   +-----------+--------+----------------------------------------------------------------------------------------------------------+

-  Example response

   .. code-block::

      {
      "backup": {
      "status": "error",
      "description": null,
      "links": [
      {
      "href": "http://192.168.82.222:8776/v2/b23b579f08c84228b9b4673c46f0c442/backups/1d1139d8-8989-49d3-8aa1-83eb691e6db2",
      "rel": "self"
      },
      {
      "href": "http://192.168.82.222:8776/b23b579f08c84228b9b4673c46f0c442/backups/1d1139d8-8989-49d3-8aa1-83eb691e6db2",
      "rel": "bookmark"
      }
      ],
      "availability_zone": null,
      "volume_id": "2748f2f2-4394-4e6e-af8d-8dd34496c024",
      "fail_reason": "Connection to swift failed: [Errno 111] ECONNREFUSED",
      "id": "1d1139d8-8989-49d3-8aa1-83eb691e6db2",
      "size": 1,
      "object_count": null,
      "container": "volumebackups",
      "name": null,
      "created_at": "2013-06-27T08:48:03.000000",
      "os-bak-tenant-attr:tenant_id": "b23b579f08c84228b9b4673c46f0c442",
      "service_metadata": " {\"bootable\": false, \"backupurl\": \"58d94782-6509-45ad-9442-970d2a005050\", \"BackupSize\": 0, \"progress\": \"0\", \"snap_id\": \"665e411f5d87431ca98c199fbd4a64fd\", \"Type\": 0} "
      }
      }

Status Codes
------------

-  Normal

   200

-  Abnormal

   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | Status Code                       | Description                                                                                |
   +===================================+============================================================================================+
   | 400 Bad Request                   | The server failed to process the request.                                                  |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 401 Unauthorized                  | You must enter the username and password to access the requested page.                     |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 403 Forbidden                     | You are forbidden to access the requested page.                                            |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 404 Not Found                     | The server could not find the requested page.                                              |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 405 Method Not Allowed            | You are not allowed to use the method specified in the request.                            |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 406 Not Acceptable                | The response generated by the server could not be accepted by the client.                  |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 407 Proxy Authentication Required | You must use the proxy server for authentication so that the request can be processed.     |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 408 Request Timeout               | The request timed out.                                                                     |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 409 Conflict                      | The request could not be processed due to a conflict.                                      |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 500 Internal Server Error         | Failed to complete the request because of an internal service error.                       |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 501 Not Implemented               | Failed to complete the request because the server does not support the requested function. |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 502 Bad Gateway                   | Failed to complete the request because the request is invalid.                             |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 503 Service Unavailable           | Failed to complete the request because the service is unavailable.                         |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 504 Gateway Timeout               | A gateway timeout error occurred.                                                          |
   +-----------------------------------+--------------------------------------------------------------------------------------------+

Error Codes
-----------

For details, see :ref:`Error Codes <en-us_topic_0022472083>`.
