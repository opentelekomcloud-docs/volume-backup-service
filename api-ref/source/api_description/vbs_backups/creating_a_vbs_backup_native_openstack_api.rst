:original_name: en-us_topic_0060614329.html

.. _en-us_topic_0060614329:

Creating a VBS Backup (Native OpenStack API)
============================================

Function
--------

This API is used to create a VBS backup.

URI
---

-  URI format

   POST /v2/{project_id}/backups

-  Parameter description

   ========== ========= ===========
   Parameter  Mandatory Description
   ========== ========= ===========
   project_id Yes       Project ID
   ========== ========= ===========

Request
-------

-  Parameter description

   +-----------+-----------+------+--------------------------------------------------------------------------+
   | Parameter | Mandatory | Type | Description                                                              |
   +===========+===========+======+==========================================================================+
   | backup    | Yes       | dict | Backup to be created. For details, see the **backup** field description. |
   +-----------+-----------+------+--------------------------------------------------------------------------+

-  **backup** field description

   +-------------+-----------+---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter   | Mandatory | Type    | Description                                                                                                                                                                                                                                                                                             |
   +=============+===========+=========+=========================================================================================================================================================================================================================================================================================================+
   | volume_id   | Yes       | string  | ID of the disk to be backed up                                                                                                                                                                                                                                                                          |
   +-------------+-----------+---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | snapshot_id | Yes       | string  | Snapshot ID of the disk to be backed up                                                                                                                                                                                                                                                                 |
   +-------------+-----------+---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | name        | No        | string  | Backup name. The value is a string of 1 to 64 characters that can contain digits, letters, underscores (_), and hyphens (-), not starting with **auto**.                                                                                                                                                |
   +-------------+-----------+---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | description | No        | string  | Backup description. The value consists of 0 to 255 characters and must not contain a greater-than sign (>) or less-than sign (<).                                                                                                                                                                       |
   +-------------+-----------+---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | container   | No        | string  | Backup container. This parameter is reserved and will be skipped.                                                                                                                                                                                                                                       |
   +-------------+-----------+---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | incremental | No        | boolean | Whether it is an incremental backup. The value **true** indicates an incremental backup and **false** indicates a full backup. By default, VBS generates a full backup for the initial backup operation and incremental backups for subsequent backup operations. Therefore, this parameter is skipped. |
   +-------------+-----------+---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | force       | No        | boolean | Whether to forcibly back up the attached disks. **true** indicates a forcible backup and **false** indicates a non-forcible backup. The value defaults to **false**.                                                                                                                                    |
   +-------------+-----------+---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | project_id  | No        | string  | Project ID                                                                                                                                                                                                                                                                                              |
   +-------------+-----------+---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

-  Example request

   .. code-block::

      {
          "backup": {
              "volume_id": "c68ae7fb-0aa5-4a97-ab01-ed02c5b7e768",
              "snapshot_id": "2bb856e1-b3d8-4432-a858-09e4ce939389",
              "name": "backup1",
              "description": "Backup_Demo"
          }
      }

Response
--------

-  Parameter description

   ========= ========== ==================================================
   Parameter Type       Description
   ========= ========== ==================================================
   backup    dict       Information about the created backup
   id        string     Backup ID
   name      string     Backup name
   links     list<dict> Information about the backup URL
   href      string     Backup URL
   rel       string     Relationship between the query result and **href**
   ========= ========== ==================================================

-  Example response

   .. code-block::

      {
        "backup": {
          "id": "54ba0e69-48a0-4a77-9cdf-a7979a7e2648",
          "links": [
            {
              "href": "https://volume.Region.dc1.domainname.com/v2/5751d8c3f2f6415993ee4326b41630ec/backups/54ba0e69-48a0-4a77-9cdf-a7979a7e2648",
              "rel": "self"
            },
            {
              "href": "https://volume.Region.dc1.domainname.com/5751d8c3f2f6415993ee4326b41630ec/backups/54ba0e69-48a0-4a77-9cdf-a7979a7e2648",
              "rel": "bookmark"
            }
          ],
          "name": "backup1"
        }
      }

   or

   .. code-block::

      {
      "badRequest": {
      "code": "XXXX",
      "message": "XXX"
      }
      }

Status Codes
------------

-  Normal

   202

-  Abnormal

   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | Status Code                       | Description                                                                                |
   +===================================+============================================================================================+
   | 400 Bad Request                   | The server failed to process the request.                                                  |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 401 Unauthorized                  | You must enter the username and password to access the requested page.                     |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 403 Forbidden                     | You are forbidden to access the requested page.                                            |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 404 Not Found                     | The server could not find the requested page.                                              |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 405 Method Not Allowed            | You are not allowed to use the method specified in the request.                            |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 406 Not Acceptable                | The response generated by the server could not be accepted by the client.                  |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 407 Proxy Authentication Required | You must use the proxy server for authentication so that the request can be processed.     |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 408 Request Timeout               | The request timed out.                                                                     |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 409 Conflict                      | The request could not be processed due to a conflict.                                      |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 500 Internal Server Error         | Failed to complete the request because of an internal service error.                       |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 501 Not Implemented               | Failed to complete the request because the server does not support the requested function. |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 502 Bad Gateway                   | Failed to complete the request because the request is invalid.                             |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 503 Service Unavailable           | Failed to complete the request because the service is unavailable.                         |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 504 Gateway Timeout               | A gateway timeout error occurred.                                                          |
   +-----------------------------------+--------------------------------------------------------------------------------------------+

Error Codes
-----------

For details, see :ref:`Error Codes <en-us_topic_0022472083>`.
